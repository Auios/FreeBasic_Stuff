<html>
<head>
<title>Compiling the test suite</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="fb_body_wrapper">
<div id="fb_tab">
<div id="fb_tab_l">Compiling the test suite</div>
<div id="fb_tab_r">&nbsp;<img src="images/fblogo_mini.gif" /></div> 
</div> 
<div id="fb_pg_wrapper">
<div id="fb_pg_body">
	<br \>
The FreeBASIC project has a suite of tests which ensure that bugs stay dead and that new bugs have a harder time of gaining a foothold. The test suite is written with the FreeBASIC port of the CUnit library (Thanks, stylin!).<br \>
<br \>
<b><u>Invocation</u></b><br \>
<br \>
The tests are located in the tests subdirectory within the main FreeBASIC directory. Invoking with make will present the following help text:<br \>
<br \>
<tt><br \>
$ make<br \>
usage: make target [options]<br \>
<br \>
Targets: (using cunit):<br \>
   cunit-tests<br \>
   log-tests<br \>
   failed-tests<br \>
   check<br \>
   mostlyclean<br \>
   clean<br \>
<br \>
Targets: (bypassing cunit)<br \>
   log-tests ALLOW_CUNIT=1<br \>
   failed-tests ALLOW_CUNIT=1<br \>
   mostlyclean ALLOW_CUNIT=1<br \>
   clean ALLOW_CUNIT=1<br \>
<br \>
Options:<br \>
   FBC=/path/fbc<br \>
   FB_LANG=fb | fblite | qb | deprecated<br \>
   DEBUG=1<br \>
   EXTRAERR=1<br \>
   ARCH=arch (default is 486)<br \>
   OS=DOS<br \>
   FPU=fpu | sse<br \>
<br \>
Targets: Configuration and Checks<br \>
   check<br \>
<br \>
Example: make all available tests<br \>
   make cunit-tests<br \>
   make log-tests<br \>
<br \>
Example: make obj -lang qb tests<br \>
   make log-tests FB_LANG=qb<br \>
</tt><br \>
<br \>
When you make an invocation, such as:<br \>
<br \>
<tt>make cunit-tests && make log-tests</tt><br \>
<br \>
Some initial generation of index files will take place, followed by the compilation of hundreds of tests. Be patient, it can take a while to run all of the tests...<br \>
<br \>
If you get an error message like: <tt>FreeBASIC/bin/linux/ld: cannot find -lcunit</tt><br \>
<br \>
This means you need to install the cunit library. On Ubuntu this looks like:<br \>
<br \>
<tt>$ sudo apt-get install libcunit1-dev</tt><br \>
<br \>
<b><u>Known Failures</u></b><br \>
<br \>
As of the writing of this document, the following tests are expected to fail on some platforms:<br \>
<br \>
<tt><br \>
Suite fbc_tests.string_.format_, Test number format test had failures:<br \>
<div class="fb_indent">1. string/format.bas:168  - CU_ASSERT_EQUAL(sWanted,sResult)<br \>
2. string/format.bas:168  - CU_ASSERT_EQUAL(sWanted,sResult)<br \>
3. string/format.bas:168  - CU_ASSERT_EQUAL(sWanted,sResult)<br \>
4. string/format.bas:168  - CU_ASSERT_EQUAL(sWanted,sResult)<br \>
</div></tt><br \>
<br \>
So if you get these failures, everything is normal. No other tests should ever fail, including log tests.<br \>
<br \>
Thank you for running the tests and contributing to make FreeBASIC a healthy compiler! Please report any other failures to http://www.freebasic.net/forum so we can investigate.<br \>
<br \>
<br \>

</div>
</div> 
</div> 
</body>
</html>
